<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¸¸ç”¨åƒè€ƒè³‡è¨Š &mdash; easy_configer v2.5.5 èªªæ˜æ–‡ä»¶</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="genindex.html" />
    <link rel="search" title="æœå°‹" href="search.html" />
    <link rel="next" title="å¥—ä»¶ç›¸é—œè³‡è¨Š" href="Metainfo.html" />
    <link rel="prev" title="å¿«é€Ÿå…¥é–€" href="Quick.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            easy_configer
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">å…§å®¹ç›®éŒ„</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="About.html">é—œæ–¼æ­¤å°ˆæ¡ˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">ä¸‹è¼‰æ•™å­¸</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quick.html">å¿«é€Ÿå…¥é–€</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">å¸¸ç”¨åƒè€ƒè³‡è¨Š</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">1. å¦‚ä½•å®šç¾©éšå±¤åŒ–é…ç½® ğŸ–‹ï¸</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2. éˆæ´»åœ°å­˜å–æ‰€æœ‰çµ„æ…‹åƒæ•¸ ğŸ”“</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">3. å‘½ä»¤åˆ—æ”¯æ´ âŒ¨ï¸</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">4. è¼‰å…¥å­é…ç½® ğŸ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">5. é…ç½®é‹ç®—å­ â›©ï¸</a></li>
<li class="toctree-l2"><a class="reference internal" href="#io">6. IO è½‰æ›å™¨ ğŸ™</a></li>
<li class="toctree-l2"><a class="reference internal" href="#absl">7. Absl é¢¨æ ¼çš„æ——æ¨™åƒæ•¸ ğŸ³ï¸</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Metainfo.html">å¥—ä»¶ç›¸é—œè³‡è¨Š</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API æ–‡ä»¶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_Configer.html">Configer</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_IO_Converter.html">IO_Converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_Container.html">utils.Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_Type_Convertor.html">utils.Type_Convertor</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">easy_configer</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">å¸¸ç”¨åƒè€ƒè³‡è¨Š</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Usage.rst.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>å¸¸ç”¨åƒè€ƒè³‡è¨Š<a class="headerlink" href="#id1" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h1>
<section id="id2">
<h2>1. å¦‚ä½•å®šç¾©éšå±¤åŒ–é…ç½® ğŸ–‹ï¸<a class="headerlink" href="#id2" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<p>åœ¨ easy-config ä¸­ï¼Œæœ‰å…©ç¨®æº–å‚™åƒæ•¸çš„æ–¹å¼ï¼šæˆ‘å€‘å¯ä»¥å®šç¾©æ‰å¹³åƒæ•¸ï¼Œä¹Ÿå¯ä»¥å°‡å¤šå€‹åƒæ•¸ä»¥å±¤æ¬¡åŒ–çš„æ–¹å¼é€²è¡Œåˆ†çµ„ï¼ˆå¾ç¬¬äºŒå±¤ç´šé–‹å§‹ï¼‰ã€‚
åœ¨å¤§å¤šæ•¸æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘å°‡æ‰å¹³åƒæ•¸å®šç¾©ç‚ºå…¨å±€è¨­ç½®ï¼Œä¸¦å°‡å…¶é¤˜çš„åƒæ•¸å®‰æ’åˆ°ç›¸æ‡‰çš„å­—å…¸ä¸­ï¼Œä»¥ä¾¿æ–¼å°‡å…¶åˆ†é…çµ¦å­ç¨‹åºã€‚
è®“æˆ‘å€‘èˆ‰ä¸€å€‹æ·±åº¦å­¸ç¿’çš„ä¾‹å­~</p>
<p><em>hier_cfg.ini æ”¾ç½®æ–¼æ‚¨çš„å·¥ä½œç›®éŒ„ä¸­</em></p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">glb_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42</span>
<span class="na">exp_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;0001&#39;</span>

<span class="c1"># æˆ‘å€‘å°‡ [...] ä¸­çš„ ... ç¨±ç‚ºå€æ®µåç¨±ï¼Œ</span>
<span class="c1"># å³æˆ‘å€‘å¯ä»¥é€šé build_dataset(**cfg.dataset) å°‡å­—å…¸æ•¸æ“šé›†è³¦å€¼çµ¦å­ç¨‹åºï¼Œé€™éº¼ç°¡å–®ï¼ï¼</span>
<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">service_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">65536</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;${cfg.root_dir}/data/kitti&quot;</span>
<span class="w">    </span><span class="c1"># ç•¶ç„¶ï¼ŒåµŒå¥—å­—å…¸ä¹Ÿæ˜¯æ”¯æŒçš„ï¼å®ƒå¯¦éš›ä¸Šå°±æ˜¯ç¹¼æ‰¿è‡ª Python åŸç”Ÿçš„å­—å…¸ï¼</span>
<span class="w">    </span><span class="k">[dataset.loader]</span>
<span class="w">        </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32</span>

<span class="k">[model]</span>
<span class="w">    </span><span class="k">[model.backbone]</span>
<span class="w">        </span><span class="na">mod_typ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;resnet&#39;</span>
<span class="w">        </span><span class="k">[model.backbone.optimizer]</span>
<span class="w">            </span><span class="na">lay_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42</span>

<span class="k">[train_cfg]</span>
<span class="w">    </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32</span>
<span class="w">    </span><span class="k">[train_cfg.opt]</span>
<span class="w">        </span><span class="na">opt_typ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;Adam&#39;</span>
<span class="w">        </span><span class="na">lr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1e-4</span>
<span class="w">        </span><span class="na">sched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;cos_anneal&#39;</span>
</pre></div>
</div>
<p>æˆ‘å€‘å·²ç¶“å®šç¾©äº†é…ç½®æ–‡ä»¶ï¼Œç¾åœ¨è®“æˆ‘å€‘çœ‹çœ‹å¦‚ä½•è¨ªå•ä»»ä½•åƒæ•¸ï¼åœ¨å·¥ä½œç›®éŒ„ä¸­åŸ·è¡Œ <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">quick_hier.py</span></code>ã€‚</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">easy_configer.Configer</span> <span class="kn">import</span> <span class="n">Configer</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">cfger</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">(</span><span class="n">cmd_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># omit cfg_from_str, hier-config also could be declared in str though ~</span>
    <span class="n">cfger</span><span class="o">.</span><span class="n">cfg_from_ini</span><span class="p">(</span><span class="s2">&quot;./hier_cfg.ini&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">cfger</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
    <span class="c1"># output nested dict : { &#39;service_port&#39;:65536, &#39;path&#39;:&#39;/data/kitti&#39;, &#39;loader&#39;:{&#39;batch_size&#39;:32} }</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;key-string access bz : </span><span class="si">{</span><span class="n">cfger</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s1">&#39;loader&#39;</span><span class="p">][</span><span class="s1">&#39;batch_size&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># output - &quot;key-string access bz : 32&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;bz : </span><span class="si">{</span><span class="n">cfger</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">batch_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># output - &quot;dot-access bz : 32&quot;</span>

    <span class="c1"># we usually conduct initialization such simple &amp; elegant!</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">build_dataset</span><span class="p">(</span><span class="o">**</span><span class="n">cfger</span><span class="o">.</span><span class="n">dataset</span><span class="p">)</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span><span class="o">**</span><span class="n">cfger</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
    <span class="o">...</span> <span class="c1"># get torch Trainer</span>
    <span class="n">Trainer</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
<p>ç„¶è€Œï¼Œä¸Šé¢çš„é…ç½®æ–‡ä»¶çš„èªæ³•å¯ä»¥é€²è¡Œæ”¹é€², å°å§! ä¾‹å¦‚ : <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> åœ¨ <code class="docutils literal notranslate"><span class="pre">dataset.loader</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">train_cfg</span></code> ä¸‹éƒ½è¢«å®šç¾©äº†å…©æ¬¡ï¼›åŒæ¨£åœ°, <code class="docutils literal notranslate"><span class="pre">layer_seed</span></code> ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
æ­¤å¤–ï¼Œpath è¢«å®šç¾©ç‚º Python å­—ç¬¦ä¸²ï¼Œéœ€è¦é€²ä¸€æ­¥é€šé Python æ¨™æº–åŒ…ä¸­çš„ Path å°è±¡é€²è¡Œè½‰æ›ã€‚æˆ‘å€‘èƒ½å¤ è¨»å†Šæˆ‘å€‘è‡ªå®šç¾©çš„æ•¸æ“šé¡å‹å—ï¼Ÿ
å¾ˆé«˜èˆˆåœ°å‘Šè¨´æ‚¨ï¼šæ˜¯çš„ï¼å¯ä»¥å„ªé›…åœ°è™•ç†ä¸Šè¿°å•é¡Œã€‚æˆ‘å€‘å¯ä»¥é€šéä½¿ç”¨åƒæ•¸æ’å€¼ä¾†è§£æ±ºç¬¬ä¸€å€‹å•é¡Œï¼Œé€šéä½¿ç”¨è‡ªå®šç¾©è¨»å†Šä¾†è§£æ±ºç¬¬äºŒå€‹å•é¡Œï¼</p>
<p>æ„Ÿè¬æ–¼ <em>Python æ ¼å¼å­—ç¬¦ä¸²</em> <code class="docutils literal notranslate"><span class="pre">${...}</span></code> å’Œ <em>è‡ªå®šç¾©è¨»å†Šæ–¹æ³•</em> <code class="docutils literal notranslate"><span class="pre">regist_cnvtor</span></code>ã€‚ è¦‹ä¸‹ä¾‹ :</p>
<blockquote>
<div><p>ç›®å‰æˆ‘å€‘æ”¯æŒçµ„æ…‹é…ç½®çš„æ’å€¼æ©Ÿåˆ¶ï¼Œå¯ä»¥é€šéç°¡å–®ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">${cfg}</span></code> è¨»è¨˜ä¾†æ’å…¥ ä»»ä½• åƒæ•¸ï¼Œå³ä½¿å®ƒå±¬æ–¼åµŒå¥—å€æ®µã€‚æ­¤å¤–ï¼Œæˆ‘å€‘é‚„æ”¯æŒ <code class="docutils literal notranslate"><span class="pre">${env}</span></code> ä¾†è¨ªå•åœ¨ bash ä¸­å°å‡ºçš„ç’°å¢ƒè®Šé‡ï¼ï¼</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For convience, we define string-config!</span>
<span class="k">def</span> <span class="nf">get_str_cfg</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39; # `export glb_seed=42` in bash!!</span>
<span class="sd">        glb_seed = ${env.glb_seed}@int   # or ${env.glb_seed} for short</span>
<span class="sd">        exp_id = &#39;0001&#39;</span>

<span class="sd">        [dataset]</span>
<span class="sd">            service_port = 65536</span>

<span class="sd">            # Don&#39;t forgot to regist Path object first and the typename will be the given name!!</span>
<span class="sd">            path = [&#39;/data/kitti&#39;]@pyPath</span>

<span class="sd">            [dataset.loader]</span>
<span class="sd">                batch_size = 32</span>
<span class="sd">                secrete_seed = 55688</span>

<span class="sd">        [model]</span>
<span class="sd">            [model.backbone]</span>
<span class="sd">                mod_typ = &#39;resnet&#39;</span>
<span class="sd">                [model.backbone.optimizer]</span>
<span class="sd">                     # aweason! but we can do more crazy stuff ~</span>
<span class="sd">                     lay_seed = ${cfg.glb_seed}</span>
<span class="sd">                     # &#39;cfg&#39; is used to access the config, feel free to access any arguments defined previsouly!!</span>
<span class="sd">                     string_seed = &quot;The secrete string in data loader is ${cfg.dataset.loader.secrete_seed}!!&quot;</span>

<span class="sd">        [train_cfg]</span>
<span class="sd">            batch_size = ${cfg.dataset.loader.batch_size}</span>
<span class="sd">            exp_id = &quot;${cfg.exp_id}&quot;  # or ${cfg.exp_id}@str, quote can not be omitted!</span>
<span class="sd">            [train_cfg.opt]</span>
<span class="sd">                opt_typ = &#39;Adam&#39;</span>
<span class="sd">                lr = 1e-4</span>
<span class="sd">                sched = &#39;cos_anneal&#39;</span>
<span class="sd">    &#39;&#39;&#39;</span>

<span class="c1"># main_block</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

    <span class="n">cfger</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;sample for arguments interpolation&quot;</span><span class="p">)</span>
    <span class="n">cfger</span><span class="o">.</span><span class="n">regist_cnvtor</span><span class="p">(</span><span class="s2">&quot;pyPath&quot;</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>  <span class="c1"># regist customer class &#39;Path&#39;</span>

    <span class="n">cfg_str</span> <span class="o">=</span> <span class="n">get_str_cfg</span><span class="p">()</span>
    <span class="n">cfger</span><span class="o">.</span><span class="n">cfg_from_str</span><span class="p">(</span><span class="n">cfg_str</span><span class="p">)</span>
    <span class="c1"># do whatever you want to do!</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id3">
<h2>2. éˆæ´»åœ°å­˜å–æ‰€æœ‰çµ„æ…‹åƒæ•¸ ğŸ”“<a class="headerlink" href="#id3" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<p>å°æ–¼ <code class="docutils literal notranslate"><span class="pre">easy_configer&gt;=v2.4.0``çš„ç‰ˆæœ¬ï¼Œæ¯å€‹åƒæ•¸å°‡è¢«å®šç¾©æ–¼</span> <span class="pre">``section</span></code> åº•ä¸‹ï¼Œè€Œ <code class="docutils literal notranslate"><span class="pre">section</span></code> æ˜¯ç”±ä¸€ç¨®ç‰¹æ®Šçš„å­—å…¸ç‰©ä»¶ <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> (ç¹¼æ‰¿æ–¼ python çš„ <cite>dict</cite>) æ‰€æ§‹æˆï¼›å®ƒæ˜¯ä¸€å€‹æ–°å»ºçš„å®¹å™¨é¡ï¼Œå…è¨± dot-operator å­˜å–ä»»ä½•å±¤æ¬¡çš„çµ„æ…‹å€¼ã€‚
ä½¿ç”¨é€™ç¨®ç‰©ä»¶å”¯ä¸€éœ€æ³¨æ„çš„æ˜¯ <strong>è«‹æ°¸é ä¸è¦å­˜å–å®ƒçš„ `__dict__` å±¬æ€§å€¼</strong>ï¼Œå› ç‚ºå®ƒå€‘æ–¼å»ºç½®æ™‚å·²è¢«æ£„ç”¨(æ˜¯ä¸€å€‹ç©ºçš„å­—å…¸)..
æˆ‘å€‘è¨­å®šä¸€å€‹ç°¡æ˜“çš„ breakpoint ä¾†æ„Ÿå—ä¸€ä¸‹ <code class="docutils literal notranslate"><span class="pre">easy_configer.utils.Container.AttributeDict</span></code> å°å­˜å–åƒæ•¸éˆæ´»æ€§çš„æ”¯æ´ã€‚</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">easy_configer.Configer</span> <span class="kn">import</span> <span class="n">Configer</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">cfger</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">()</span>
    <span class="n">cfger</span><span class="o">.</span><span class="n">cfg_from_ini</span><span class="p">(</span><span class="s2">&quot;./hier_cfg.ini&quot;</span><span class="p">)</span>
    <span class="nb">breakpoint</span><span class="p">()</span>
</pre></div>
</div>
<p>æˆ‘å€‘å¯«ä¸€å€‹ç‰¹åˆ¥çš„çµ„æ…‹æª” <code class="docutils literal notranslate"><span class="pre">hier_cfg.ini</span></code>!!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># nested-dict</span>
<span class="p">[</span><span class="n">secA</span><span class="p">]</span> <span class="c1"># test depth ((sub^4)-section under secA)</span>
    <span class="n">lev</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">[</span><span class="n">secA</span><span class="o">.</span><span class="n">secB</span><span class="p">]</span>
        <span class="n">lev</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="p">[</span><span class="n">secA</span><span class="o">.</span><span class="n">secB</span><span class="o">.</span><span class="n">secC</span><span class="p">]</span>
            <span class="n">lev</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="p">[</span><span class="n">secA</span><span class="o">.</span><span class="n">secB</span><span class="o">.</span><span class="n">secC</span><span class="o">.</span><span class="n">secD</span><span class="p">]</span>
                <span class="n">lev</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
<p>ç¾åœ¨æˆ‘å€‘å¯ä»¥å­˜å–å„éšå±¤çš„ <code class="docutils literal notranslate"><span class="pre">lev</span></code> è®Šæ•¸ :</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(pdb)</span> <span class="pre">cfger.secA.lev</span></code>, è¼¸å‡º <code class="docutils literal notranslate"><span class="pre">lev</span> <span class="pre">:</span> <span class="pre">1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(pdb)</span> <span class="pre">cfger['secA'].secB['lev']</span></code>, è¼¸å‡º <code class="docutils literal notranslate"><span class="pre">lev</span> <span class="pre">:</span> <span class="pre">2</span></code>, ä¸¦ç¹¼çºŒ..</p></li>
<li><p>æœ€ç˜‹ç‹‚çš„ç¯„ä¾‹ ~ <code class="docutils literal notranslate"><span class="pre">(pdb)</span> <span class="pre">cfger.secA.['secB'].secC['secD'].lev</span></code>, è¼¸å‡º <code class="docutils literal notranslate"><span class="pre">lev</span> <span class="pre">:</span> <span class="pre">4</span></code></p></li>
</ol>
</section>
<hr class="docutils" />
<section id="id4">
<h2>3. å‘½ä»¤åˆ—æ”¯æ´ âŒ¨ï¸<a class="headerlink" href="#id4" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<blockquote>
<div><p>æˆ‘å€‘åŒæ¨£ç”¨ <code class="docutils literal notranslate"><span class="pre">hier_cfg.ini</span></code> ä½œç‚ºç¯„ä¾‹!</p>
</div></blockquote>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># hier_cfg.ini</span>
<span class="na">glb_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42@int</span>
<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">ds_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">None</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&#39;/data/kitti&#39;]@pyPath</span>
<span class="w">    </span><span class="k">[dataset.loader]</span>
<span class="w">        </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32@int</span>
</pre></div>
</div>
<p>åŸ·è¡Œ Python ç¨‹åºä¸¦æ‰“å°å‡ºå¹«åŠ©ä¿¡æ¯ <span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">quick_hier.py</span> <span class="pre">-h</span></code></p>
<p>æ›´æ–°æ‰å¹³åƒæ•¸ä¸¦æ‰“å°å‡ºå¹«åŠ©ä¿¡æ¯ <span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">quick_hier.py</span> <span class="pre">glb_var=404</span> <span class="pre">-h</span></code></p>
<p>ç‰¹åˆ¥æ˜¯æ›´æ–° <strong>éæ‰å¹³åƒæ•¸</strong>ï¼Œæ‚¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­é€šéé»æ“Šè¨ªå•ä»»ä½•å±¤ç´šçš„åƒæ•¸ï¼ï¼ˆçµåˆä»»ä½•åƒæ•¸æ›´æ–°ï¼‰ã€‚ç¾åœ¨ï¼Œè©¦è‘—æ›´æ”¹ä»»ä½•åµŒå¥—çš„åƒæ•¸ã€‚<span class="raw-html-m2r"><br></span>
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">quick_hier.py</span> <span class="pre">dataset.ds_type=&quot;'kitti'&quot;</span> <span class="pre">dataset.path=&quot;{'path':'/root/ds'}&quot;</span> <span class="pre">dataset.loader.batch_size=48</span></code></p>
<dl class="simple">
<dt>( è«‹æ³¨æ„ï¼Œå‘½ä»¤è¡Œä¸­å­—ç¬¦ä¸²çš„è²æ˜æœ‰é»æ£˜æ‰‹ï¼Œä½†ç›®å‰æˆ‘å€‘åªæ”¯æ´å…©ç¨®æ–¹å¼ï¼š</dt><dd><p><code class="docutils literal notranslate"><span class="pre">dataset.ds_type=&quot;'kitti'&quot;</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">dataset.ds_type=kitti&#64;str</span></code>, é¸ä¸€å€‹ä½ å–œæ­¡çš„ ~ )</p>
</dd>
</dl>
</section>
<hr class="docutils" />
<section id="id5">
<h2>4. è¼‰å…¥å­é…ç½® ğŸ<a class="headerlink" href="#id5" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<p>å¦‚åŒ <code class="docutils literal notranslate"><span class="pre">omegaconf</span></code>, å¤§å¤šæ•¸ç”¨æˆ¶æœŸæœ›æ ¹æ“šé¡å‹å°‡é…ç½®æ–‡ä»¶åˆ†é–‹ä¸¦åœ¨é‹è¡Œæ™‚å‹•æ…‹åˆä½µå®ƒå€‘ã€‚é€™æ˜¯ä¸€å€‹åˆç†çš„éœ€æ±‚ï¼Œä¹‹å‰ç‰ˆæœ¬çš„ easy-config æä¾›äº†å…©ç¨®é€²è¡Œæ­¤æ“ä½œçš„æ–¹å¼ï¼Œä½†éƒ½æœ‰å…¶é™åˆ¶ï¼š</p>
<ol class="arabic simple">
<li><p>æ‚¨å¯ä»¥å‘¼å« <code class="docutils literal notranslate"><span class="pre">cfg_from_ini</span></code> å…©æ¬¡, ä¾‹å¦‚, <code class="docutils literal notranslate"><span class="pre">cfg.cfg_from_ini('./base_cfg')</span> <span class="pre">;</span> <span class="pre">cfg.cfg_from_ini('./override_cfg')</span></code>ã€‚ä½†é€™æ¨£åšä¸¦æœªæ˜ç¢ºè¼‰å…¥é…ç½®ï¼Œå¾è€Œé™ä½äº†å¯è®€æ€§ã€‚</p></li>
<li><p>æ‚¨å¯ä»¥ä½¿ç”¨é…ç½®åˆä½µï¼Œä¾‹å¦‚ : <code class="docutils literal notranslate"><span class="pre">new_cfg</span> <span class="pre">=</span> <span class="pre">base_cfg</span> <span class="pre">|</span> <span class="pre">override_cfg</span></code>ã€‚ä½†æ˜¯ç•¶æ‚¨éœ€è¦åˆä½µå¤šå€‹é…ç½®æ™‚ï¼Œé€™ä¸¦ä¸æ˜¯ä¸€å€‹å„ªé›…çš„è§£æ±ºæ–¹æ¡ˆâ€¦</p></li>
</ol>
<p>ç¾åœ¨ï¼Œæˆ‘å€‘æä¾›äº†ç¬¬ä¸‰ç¨®æ–¹å¼ : <strong>sub-config</strong>ã€‚æ‚¨å¯ä»¥é€šéåœ¨è¡Œé¦–ç°¡å–®åœ°æ”¾ç½® <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> ç¬¦è™Ÿä¾†åœ¨å±¤æ¬¡é…ç½®çš„ä»»ä½•éšå±¤å°å…¥å­é…ç½®ã€‚
é›–ç„¶å‹•æ…‹è¦†å¯«çµ„æ…‹å€¼ä¸€ç›´æ˜¯é€ æˆå¤§å‹ç¨‹å¼çš„çµ„æ…‹é…ç½®é›£ä»¥è¿½è¹¤çš„æ ¹æœ¬åŸå› ï¼Œä½†æˆ‘åŸºæœ¬ä¸Šä¹Ÿå¦¥å”äº†ï¼Œå¾ˆéºæ†¾â€¦
ç„¶è€Œï¼Œè«‹æ³¨æ„ sub-config é è¨­ä¸å…è¨±æ‚¨è¦†å¯«ä»»ä½•å…ˆå‰å®šç¾©çš„ <strong>å€æ®µ</strong>ï¼Œå› ç‚ºé€™é€šå¸¸æ²’æœ‰å¿…è¦!</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./base_cfg.ini</span>
<span class="na">glb_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42@int</span>
<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">&gt; ./config/ds_config.ini</span>

<span class="k">[model]</span>
<span class="w">    </span><span class="na">&gt; ./root/config/model_config.ini</span>

<span class="c1"># ./config/ds_config.ini</span>
<span class="na">ds_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">None</span>
<span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&#39;/data/kitti&#39;]@pyPath</span>
<span class="k">[dataset.loader]</span>
<span class="w">    </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32@int</span>

<span class="c1"># ./root/config/model_config.ini</span>
<span class="k">[model.backbone]</span>
<span class="w">    </span><span class="na">mod_typ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;resnet&#39;</span>
<span class="w">    </span><span class="k">[model.backbone.optimizer]</span>
<span class="w">    </span><span class="c1"># and yes, interpolation is still valid &quot;after&quot; the reference argument is declared!</span>
<span class="w">        </span><span class="na">lay_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">${cfg.glb_seed}</span>
</pre></div>
</div>
<p>é‚„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å€‘ä»ç„¶å»ºè­°ä½ å‰µå»ºå¤šå€‹é…ç½®å¯¦ä¾‹ä¸¦ä»¥çµ„æ…‹åˆä½µçš„æ–¹å¼è¦†å¯«çµ„æ…‹å€¼ï¼Œé€šå¸¸ <strong>é¡¯æ€§çš„</strong> åšé€™ä»¶äº‹æ¯”éš±æ€§çš„å®Œæˆä¾†çš„å¥½ã€‚
èˆ‡å…¶åƒ omegaconf é‚£æ¨£éœé»˜åœ°å‹•æ…‹è¦†è“‹ä½ çš„é…ç½®ï¼Œæˆ‘å€‘æ¨è–¦ä½¿ç”¨é¡¯å¼çš„åˆä½µæ–¹æ³•ä¾†è™•ç†ã€‚</p>
<blockquote>
<div><p>é›–ç„¶æˆ‘ä¸æ¨è–¦ï¼Œå¦‚æœæ‚¨æƒ³è¦å¦‚åŒomegaconfçš„åŠŸèƒ½ï¼Œå¯ä»¥é€éå•Ÿç”¨ <code class="docutils literal notranslate"><span class="pre">allow_override</span></code> æ——æ¨™ä¾†é”æˆï¼›ä¾‹å¦‚. <code class="docutils literal notranslate"><span class="pre">cfg.cfg_from_ini(...,</span> <span class="pre">allow_override=True)</span></code>, <code class="docutils literal notranslate"><span class="pre">cfg.cfg_from_str(...,</span> <span class="pre">allow_override=True)</span></code>ã€‚
é€™å€‹è¨­å®šé›–ç„¶æ˜¯å¥—ç”¨åœ¨ <code class="docutils literal notranslate"><span class="pre">cfg.cfg_from_ini</span></code> ç­‰æ–¹æ³•ï¼Œä½† sub-config çš„è¡Œç‚ºä¹Ÿæœƒéµå¾ªæ­¤æ——æ¨™çš„è¨­å®šä¾†è¦†å¯«çµ„æ…‹å€¼ï¼Œæˆ–æ˜¯æ‹‹å‡ºä¸€å€‹é‹è¡ŒéŒ¯èª¤ã€‚
æ³¨æ„é †åºï¼Œå°å…¥çš„ <strong>å­é…ç½®</strong> è¢«è¦–ç‚º <strong>ã€Œé»˜èªè¨­ç½®ã€</strong>ï¼Œä¸»é…ç½®ï¼ˆå°å…¥å­é…ç½®çš„é…ç½®ï¼‰å°‡è¦†è“‹å®ƒçš„è¨­ç½®ã€‚</p>
</div></blockquote>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./base_cfg.ini</span>

<span class="c1"># note that the order between defined arguments and imported sub-config do affect the final value of arguments!</span>
<span class="na">glb_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42</span>

<span class="c1"># import several default setup :</span>
<span class="na">&gt; ./config/ds_config.ini</span>
<span class="na">&gt; ./config/model_config.ini</span>

<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">n_worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span>

<span class="k">[model]</span>
<span class="w">    </span><span class="na">n_blk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>

<span class="c1"># ./config/ds_config.ini</span>
<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">n_worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&#39;/data/kitti&#39;]@pyPath</span>
<span class="w">    </span><span class="k">[dataset.loader]</span>
<span class="w">        </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32@int</span>

<span class="c1"># ./root/config/model_config.ini</span>
<span class="k">[model]</span>
<span class="w">    </span><span class="na">mod_typ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;resnet&#39;</span>
<span class="w">    </span><span class="na">n_blk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">    </span><span class="k">[model.optimizer]</span>
<span class="w">    </span><span class="c1"># and yes, interpolation is still valid &quot;after&quot; the reference argument is declared!</span>
<span class="w">        </span><span class="na">lay_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">${cfg.glb_seed}</span>
</pre></div>
</div>
<p>ç¶“éå‹•æ…‹è¼‰å…¥å¾Œ :</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">glb_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42</span>

<span class="k">[dataset]</span>
<span class="w">    </span><span class="na">n_worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span><span class="w">  </span><span class="c1"># overwrited by base_cfg.ini</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&#39;/data/kitti&#39;]@pyPath</span>
<span class="w">    </span><span class="k">[dataset.loader]</span>
<span class="w">        </span><span class="na">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32@int</span>

<span class="k">[model]</span>
<span class="w">    </span><span class="na">n_blk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span><span class="w"> </span><span class="c1"># overwrited by base_cfg.ini</span>
<span class="w">    </span><span class="na">mod_typ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;resnet&#39;</span>
<span class="w">    </span><span class="k">[model.optimizer]</span>
<span class="w">        </span><span class="na">lay_seed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">42</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id6">
<h2>5. é…ç½®é‹ç®—å­ â›©ï¸<a class="headerlink" href="#id6" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<p>é…ç½®é‹ç®—å­æ˜¯å‹•æ…‹é…ç½®ç³»çµ±çš„æ ¸å¿ƒæŠ€è¡“ä¹‹ä¸€!!
åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°åˆä½µé…ç½®ç³»çµ±å·²ç¶“æä¾›äº†ä»¤äººå°è±¡æ·±åˆ»çš„å±¤æ¬¡åˆä½µåŠŸèƒ½!</p>
<blockquote>
<div><p>ä¾‹å¦‚, cfg_a ä¸­çš„è®Šé‡å¯ä»¥è¢« cfg_b æ›¿æ›ï¼Œåªè¦ä»–å€‘ç½®æ–¼ç›¸åŒ section å€å¡Šä¸­ï¼Œä¸¦ç‚ºåŒåè®Šé‡ <code class="docutils literal notranslate"><span class="pre">ghyu.opop.add</span></code>ï¼›è€Œä¸åŒçš„å‘½åç©ºé–“æœƒä¿æŒå®ƒå€‘çš„è®Šé‡å€¼å®‰å…¨ã€‚
å› æ­¤ï¼Œ <code class="docutils literal notranslate"><span class="pre">ghyu.opop.add</span></code> çš„å€¼å°‡è®Šç‚º 67ï¼Œè€Œ <code class="docutils literal notranslate"><span class="pre">ghyu.opop.tueo.inpo</span></code> çš„å€¼å°‡åƒç…§æ‰å¹³åƒæ•¸ <code class="docutils literal notranslate"><span class="pre">inpo</span></code>ï¼Œä¸¦è®Šæˆ 46ã€‚</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">easy_configer.Configer</span> <span class="kn">import</span> <span class="n">Configer</span>

<span class="k">def</span> <span class="nf">build_cfg_text_a</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    # Initial config file :</span>
<span class="s1">    inpo = 46@int</span>
<span class="s1">    [test]</span>
<span class="s1">        mrg_var_tst = [1, 3, 5]@list</span>
<span class="s1">        [test.ggap]</span>
<span class="s1">            gtgt = haha@str</span>

<span class="s1">    [ghyu]</span>
<span class="s1">        [ghyu.opop]</span>
<span class="s1">            add = 32@int</span>
<span class="s1">            [ghyu.opop.tueo]</span>
<span class="s1">                salt = $</span><span class="si">{cfg.inpo}</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">build_cfg_text_b</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    # Initial config file :</span>
<span class="s1">    inop = 32@int</span>
<span class="s1">    [test]</span>
<span class="s1">        mrg_var_tst = [1, 3, 5]@list</span>
<span class="s1">        [test.ggap]</span>
<span class="s1">            gtgt = overrides@str</span>
<span class="s1">            [test.ggap.conf]</span>
<span class="s1">                secert = 42@int</span>

<span class="s1">    [ghyu]</span>
<span class="s1">        [ghyu.opop]</span>
<span class="s1">            add = 67@int</span>
<span class="s1">            div = 1e-4@float</span>

<span class="s1">    [new]</span>
<span class="s1">        [new.new]</span>
<span class="s1">            newsec = wpeo@str</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">cfg_a</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">(</span><span class="n">cmd_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cfg_a</span><span class="o">.</span><span class="n">cfg_from_str</span><span class="p">(</span><span class="n">build_cfg_text_a</span><span class="p">())</span>


    <span class="n">cfg_b</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">()</span>
    <span class="n">cfg_b</span><span class="o">.</span><span class="n">cfg_from_str</span><span class="p">(</span><span class="n">build_cfg_text_b</span><span class="p">())</span>

    <span class="c1"># default, override falg is turn off ~</span>
    <span class="n">cfg_a</span><span class="o">.</span><span class="n">merge_conf</span><span class="p">(</span><span class="n">cfg_b</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># `cfg_b = cfg_b | cfg_a`, operator support, warn to decrease the read-ability...</span>
    <span class="c1"># cfg_a will override the argument of cfg_b which share the identitical variable name in cfg_b!</span>
    <span class="c1"># operator support : `cfg_b |= cfg_a` == `cfg_b = cfg_b | cfg_a`</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>å…¶é¤˜åŠŸèƒ½</strong></p>
</section>
<section id="io">
<h2>6. IO è½‰æ›å™¨ ğŸ™<a class="headerlink" href="#io" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<p>æˆ‘å€‘è—‰ç”±æä¾› IO converter é¡åˆ¥ä¾†å°‡ <cite>easy_configer</cite> çµ„æ…‹è½‰æ›è‡³å…¶ä»–çµ„æ…‹å·¥å…·çš„å¯¦ä¾‹ï¼ŒåŸºæœ¬ä¸Šå¹¾å€‹çŸ¥åçš„çµ„æ…‹å·¥å…·éƒ½åœ¨æˆ‘çš„æ”¯æ´ç¯„åœï¼Œ
åªè¦ç°¡æ˜“çš„å‘¼å«å°æ‡‰æ–¹æ³•å³å¯å®Œæˆï¼Œä»¥ä¸‹ç‚ºç¯„ä¾‹ :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">TableConfig</span><span class="p">:</span>
    <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">DatabaseConfig</span><span class="p">:</span>
    <span class="n">table_cfg</span><span class="p">:</span> <span class="n">TableConfig</span> <span class="o">=</span> <span class="n">TableConfig</span><span class="p">()</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ModelConfig</span><span class="p">:</span>
    <span class="n">data_source</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TableConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ServerConfig</span><span class="p">:</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">DatabaseConfig</span> <span class="o">=</span> <span class="n">DatabaseConfig</span><span class="p">()</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">ModelConfig</span> <span class="o">=</span> <span class="n">ModelConfig</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">easy_configer.IO_Converter</span> <span class="kn">import</span> <span class="n">IO_Converter</span>

    <span class="c1"># first import the IO_converter</span>
    <span class="kn">from</span> <span class="nn">easy_config.IO_Converter</span> <span class="kn">import</span> <span class="n">IO_Converter</span>
    <span class="n">cnvt</span> <span class="o">=</span> <span class="n">IO_Converter</span><span class="p">()</span>

    <span class="c1"># convert easy_config instance into the argparse instance</span>
    <span class="n">argp_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_to</span><span class="p">(</span><span class="n">cfger</span><span class="p">,</span> <span class="s1">&#39;argparse&#39;</span><span class="p">)</span>

    <span class="n">uargp_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_to</span><span class="p">(</span><span class="n">cfger</span><span class="p">,</span> <span class="s1">&#39;argparse&#39;</span><span class="p">,</span> <span class="n">parse_arg</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">argp_cfg</span> <span class="o">=</span> <span class="n">uargp_cfg</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="c1">## convert config INTO..</span>
    <span class="c1"># convert easy_config instance into the omegaconf instance</span>
    <span class="n">ome_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_to</span><span class="p">(</span><span class="n">cfger</span><span class="p">,</span> <span class="s1">&#39;omegaconf&#39;</span><span class="p">)</span>

    <span class="c1"># convert easy_config instance into the &quot;yaml string&quot;</span>
    <span class="n">yaml_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_to</span><span class="p">(</span><span class="n">cfger</span><span class="p">,</span> <span class="s1">&#39;yaml&#39;</span><span class="p">)</span>

    <span class="c1"># convert easy_config instance into the &quot;dict&quot;</span>
    <span class="n">yaml_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_to</span><span class="p">(</span><span class="n">cfger</span><span class="p">,</span> <span class="s1">&#39;dict&#39;</span><span class="p">)</span>

    <span class="c1">## convert into easy-config FROM..</span>
    <span class="c1"># argparse, omegaconf, yaml, dict ... is supported</span>
    <span class="n">ez_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_from</span><span class="p">(</span><span class="n">argp_cfg</span><span class="p">,</span> <span class="s1">&#39;omegaconf&#39;</span><span class="p">)</span>

    <span class="c1"># Especially, it support &quot;dataclass&quot;!</span>
    <span class="n">ds_cfg</span> <span class="o">=</span> <span class="n">ServerConfig</span><span class="p">()</span>
    <span class="n">ez_cfg</span> <span class="o">=</span> <span class="n">cnvt</span><span class="o">.</span><span class="n">cnvt_cfg_from</span><span class="p">(</span><span class="n">ds_cfg</span><span class="p">,</span> <span class="s1">&#39;dataclass&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="absl">
<h2>7. Absl é¢¨æ ¼çš„æ——æ¨™åƒæ•¸ ğŸ³ï¸<a class="headerlink" href="#absl" title="æœ¬æ¨™é ­çš„æ°¸ä¹…é€£çµ">ïƒ</a></h2>
<blockquote>
<div><p>easy_config ä¹Ÿæ”¯æŒæ‚¨å¯ä»¥åœ¨ä¸åŒçš„ Python æ–‡ä»¶ä¸­è¨ªå•ã€ç›¸åŒã€çš„é…ç½®æ–‡ä»¶ï¼Œè€Œç„¡éœ€é‡æ–°è²æ˜é…ç½®ã€‚åœ¨ç›¸åŒçš„å·¥ä½œç›®éŒ„ä¸‹å‰µå»ºä¸€å€‹åç‚º utils.py çš„æ–‡ä»¶ã€‚</p>
</div></blockquote>
<p>å‡è¨­æ‚¨åŸ·è¡Œäº† <code class="docutils literal notranslate"><span class="pre">main.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">easy_configer.Configer</span> <span class="kn">import</span> <span class="n">Configer</span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">get_var_from_flag</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">cfg</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">()</span>
   <span class="n">cfg</span><span class="o">.</span><span class="n">cfg_from_str</span><span class="p">(</span><span class="s2">&quot;var = 32&quot;</span><span class="p">)</span>

   <span class="c1"># both should output 32 ~</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;var from main : </span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">var</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;var from flag : </span><span class="si">{</span><span class="w"> </span><span class="n">get_var_from_flag</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>ç¾åœ¨ï¼Œç•¶æ‚¨ step in ä¸€å€‹ä½æ–¼ä¸åŒæª”æ¡ˆçš„ <code class="docutils literal notranslate"><span class="pre">get_var_from_flag</span></code> å‡½æ•¸..</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">easy_configer.Configer</span> <span class="kn">import</span> <span class="n">Configer</span>

<span class="k">def</span> <span class="nf">get_n_blk_from_flag</span><span class="p">():</span>
    <span class="n">new_cfger</span> <span class="o">=</span> <span class="n">Configer</span><span class="p">()</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="n">new_cfger</span><span class="o">.</span><span class="n">get_cfg_flag</span><span class="p">()</span>
    <span class="c1"># test to get the pre-defined &#39;var&#39;</span>
    <span class="k">return</span> <span class="n">flag</span><span class="o">.</span><span class="n">var</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="Quick.html" class="btn btn-neutral float-left" title="å¿«é€Ÿå…¥é–€" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="Metainfo.html" class="btn btn-neutral float-right" title="å¥—ä»¶ç›¸é—œè³‡è¨Š" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæ¬Šæ‰€æœ‰ 2024, JosefHuangã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>